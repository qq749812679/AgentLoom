## 生成算法说明（MVP）

### 图片生成（合成版）
- 依据主题映射预设调色板（`utils/colors.py`）
- 横向渐变作为背景
- 特定主题绘制简图标：
  - 睡眠：月亮与星点
  - 圣诞节：圣诞树、雪点
  - 打雷：闪电折线

后续替换为扩散/文生图模型，使用 prompt + controlnet 或 loRA 增强风格。

### 音乐生成（合成版）
- 主题映射到音阶与速度（`music_gen.py`）：
  - 睡眠/禅修：慢速、五声音阶
  - 圣诞节：中速、大调音阶
  - 打雷：不协和半音阶元素
  - 派对：更快节奏
- 旋律按拍分段合成正弦波，叠加暗度相关的低音 drone

后续替换为 MusicGen/AudioLDM；或用 RNN/Transformer 生成 MIDI，再渲染音色。

### 图片到音乐
- 取 64×64 缩略图计算亮度与对比度（标准差），映射基频与调制频率，进行幅度调制

### 灯光节目
- 主题调色板序列 + 呼吸曲线（线性强度序列）
- 图片取主色（均值）驱动呼吸
- 导出为 JSON，字段 `r,g,b,ms`


